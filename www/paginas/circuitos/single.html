<!DOCTYPE HTML>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0">
        <title>Comércio - Turismo Quissamã</title>

        <!--Import Google Icon Font -->
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

        <!--Import CSS -->
        <link type="text/css" rel="stylesheet" href="../../assets/css/materialize.css">
        <link type="text/css" rel="stylesheet" href="../../assets/css/style.css">
        <link type="text/css" rel="stylesheet" href="../../assets/css/single.css">
        <link type="text/css" rel="stylesheet" href="../../assets/plugins/lightbox2/src/css/lightbox.min.css">
    </head>

    <body class="config">
        <nav class="nav-extended transparent navbar-fixed navbar-image background-blur">
            <div class="nav-wrapper">
                <a href="javascript:history.go(-1)" class="left menu-link waves-effect waves-circle waves-light">
                    <i class="material-icons">arrow_back</i>
                </a>

                <a href="#" class="right menu-link waves-effect waves-circle waves-light">
                    <i class="material-icons">share</i>
                </a>
            </div>
        </nav>

        <div id="conteudo" style="display: none">
            <div class="section-top">
                <div class="card">
                    <div class="card-image">
                        <img src="../../assets/img/bg/jurubatiba.jpg" class="image-blur" id="section-card-bg">

                        <div class="card-content">
                            <h4 id="lugar-nome"></h4>
                        </div>
                    </div>
                    <ul class="tabs">
                        <li class="tab col s3">
                            <a class="active" href="#descricao">Descrição</a>
                        </li>
                        <li class="tab col s3">
                            <a href="#informacoes">Informações</a>
                        </li>
                        <li class="tab col s3">
                            <a href="#fotos">Fotos</a>
                        </li>
                    </ul>
                </div>
            </div>

            <div id="content">
                <div class="row">
                        
                    <div id="descricao" class="col s12">
                        <p id="lugar-descricao"></p>
                    </div>
                    <div id="informacoes" class="col s12">
                        <p id="lugar-informacoes"></p>
                        <div id="informacoes-extra"></div>
                    </div>
                    <div id="fotos" class="col s12" style="padding: 0">
                        <div id="lugar-fotos" style="margin-top: -3px"></div>
                    </div>
                </div>
            </div>
        </div>

        <div id="loader" style="padding-top: 300px;">
            <div class="preloader-wrapper big active">
                <div class="spinner-layer spinner-green-only">
                    <div class="circle-clipper left">
                        <div class="circle"></div>
                    </div><div class="gap-patch">
                        <div class="circle"></div>
                    </div><div class="circle-clipper right">
                        <div class="circle"></div>
                    </div>
                </div>
            </div>
        </div>
        <!--Import jQuery before materialize.js-->
        <script type="text/javascript" src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
        <script src="../../assets/plugins/lightbox2/src/js/lightbox.js"></script>
        <script type="text/javascript" src="../../assets/js/materialize.min.js"></script>
        <script type="text/javascript" src="../../assets/js/functions.js"></script>

        <style>
            .galery-image {
                max-width: calc(50% - 10px);
                margin: 2px 5px;
                float: left;
            }
        </style>

        <script>
            $(document).ready(function () {
                var id = $(window).GetURLParameter('id');
                var url = "https://turismo-quissama.000webhostapp.com/lugares/" + id;

                $.ajax({
                    method: "GET",
                    url: url
                }).done(function( data ) { //imagem_existe

                    var id          = data.id;
                    var nome        = data.nome;
                    var descricao   = data.descricao;
                    var informacoes = data.informacoes;
                    var imagens     = data.imagens;
                    var endereco    = data.endereco;
                    var horario     = data.hora_inicio + "h - " + data.hora_fim + "h";
                    var functionamento = data.data_inicio + " - " + data.data_fim;
                    var fotos       = "";
                    var bg          = "";

                    if (imagens.length > 0) {
                        bg = imagens[0].url;
                        style = 'style="max-width: 100%"';
                        
                        for (i = 0; i < imagens.length; i++) {
                            if (imagens.length > 1)
                                style="";

                            fotos += '<a '+ style +' class="galery-image" href="'+ imagens[i].url +'" data-lightbox="single"><img class="responsive-img" src="'+ imagens[i].url +'" alt="image-'+i+'"/></a>'
                        }
                    } else {
                        bg = "../../assets/img/default.jpg";
                        fotos += '<a class="galery-image" style="max-width: 100%" href="'+bg+'" data-lightbox="single"><img class="responsive-img" src="'+bg+'" alt="image-1"/></a>'
                    }
                    
                    $("#informacoes-extra").html( extra );
                    $("#section-card-bg").attr("src", bg );
                    $("#lugar-nome").html( nome );
                    $("#lugar-descricao").html( descricao );
                    $("#lugar-informacoes").html( informacoes );
                    $("#lugar-fotos").append( fotos );

                    $('#conteudo').show();

                    $("#loader").hide();   
                });
            });
        </script>
    </body>
</html>